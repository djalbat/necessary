"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.isPathName = isPathName;
exports.isPathTopmostName = isPathTopmostName;
exports.isPathRelativePath = isPathRelativePath;
exports.isPathAbsolutePath = isPathAbsolutePath;
exports.isTopmostNameInAbsolutePath = isTopmostNameInAbsolutePath;
exports.combinePaths = combinePaths;
exports.concatenatePaths = concatenatePaths;
exports.bottommostNameFromPath = bottommostNameFromPath;
exports.topmostDirectoryPathFromPath = topmostDirectoryPathFromPath;
exports.topmostDirectoryNameFromPath = topmostDirectoryNameFromPath;
exports.pathWithoutBottommostNameFromPath = pathWithoutBottommostNameFromPath;
exports.pathWithoutTopmostDirectoryNameFromPath = pathWithoutTopmostDirectoryNameFromPath;
exports.default = void 0;
var _constants = require("../constants");
var _array = require("../utilities/array");
function isPathName(path) {
    path = path.replace(/^\//, _constants.EMPTY_STRING).replace(/\/$/, _constants.EMPTY_STRING); ///
    var pathName = /\//.test(path) === false;
    return pathName;
}
function isPathTopmostName(path) {
    var pathName = isPathName(path), pathAbsolutePath = isPathAbsolutePath(path), pathTopmostName = pathName && pathAbsolutePath;
    return pathTopmostName;
}
function isPathRelativePath(path) {
    var pathRelativePath = !/^\//.test(path);
    return pathRelativePath;
}
function isPathAbsolutePath(path) {
    var pathAbsolutePath = /^\//.test(path);
    return pathAbsolutePath;
}
function isTopmostNameInAbsolutePath(topmostName, absolutePath) {
    var regExp = new RegExp("^".concat(topmostName, "(?:\\/.+)?$")), topmostNameInAbsolutePath = regExp.test(absolutePath);
    return topmostNameInAbsolutePath;
}
function combinePaths(path, relativePath) {
    var combinedPath = null;
    var pathNames = path.split(/\//), relativePathNames = relativePath.split(/\//);
    var lastPathName, firstRelativePathName = (0, _array).first(relativePathNames);
    if (firstRelativePathName === ".") {
        relativePathNames.shift();
    }
    firstRelativePathName = (0, _array).first(relativePathNames);
    lastPathName = (0, _array).last(pathNames);
    while(firstRelativePathName === ".." && lastPathName !== undefined){
        relativePathNames.shift();
        pathNames.pop();
        firstRelativePathName = (0, _array).first(relativePathNames);
        lastPathName = (0, _array).last(pathNames);
    }
    if (lastPathName !== undefined) {
        var combinedPathNames = [].concat(pathNames).concat(relativePathNames);
        combinedPath = combinedPathNames.join("/");
    }
    return combinedPath;
}
function concatenatePaths(path, relativePath) {
    path = path.replace(/\/$/, _constants.EMPTY_STRING); ///
    var concatenatedPath = "".concat(path, "/").concat(relativePath);
    return concatenatedPath;
}
function bottommostNameFromPath(path) {
    var bottommostName = null;
    var matches = path.match(/^.*\/([^\/]+\/?)$/);
    if (matches !== null) {
        var secondMatch = (0, _array).second(matches);
        bottommostName = secondMatch; ///
    }
    return bottommostName;
}
function topmostDirectoryPathFromPath(path) {
    var matches = path.match(/^(.+)\/[^\/]+\/?$/), secondMatch = (0, _array).second(matches), topmostDirectoryPath = secondMatch; ///
    return topmostDirectoryPath;
}
function topmostDirectoryNameFromPath(path) {
    var topmostDirectoryName = null;
    var matches = path.match(/^([^\/]+)\/.+$/);
    if (matches !== null) {
        var secondMatch = (0, _array).second(matches);
        topmostDirectoryName = secondMatch; ///
    }
    return topmostDirectoryName;
}
function pathWithoutBottommostNameFromPath(path) {
    var pathWithoutBottommostName = null;
    var matches = path.match(/^(.*)\/[^\/]+\/?$/);
    if (matches !== null) {
        var secondMatch = (0, _array).second(matches);
        pathWithoutBottommostName = secondMatch; ///
    }
    return pathWithoutBottommostName;
}
function pathWithoutTopmostDirectoryNameFromPath(path) {
    var pathWithoutTopmostDirectoryName = null;
    var matches = path.match(/^[^\/]+\/(.+)$/);
    if (matches !== null) {
        var secondMatch = (0, _array).second(matches);
        pathWithoutTopmostDirectoryName = secondMatch;
    }
    return pathWithoutTopmostDirectoryName;
}
var _default = {
    isPathName: isPathName,
    isPathTopmostName: isPathTopmostName,
    isPathRelativePath: isPathRelativePath,
    isPathAbsolutePath: isPathAbsolutePath,
    isTopmostNameInAbsolutePath: isTopmostNameInAbsolutePath,
    combinePaths: combinePaths,
    concatenatePaths: concatenatePaths,
    bottommostNameFromPath: bottommostNameFromPath,
    topmostDirectoryPathFromPath: topmostDirectoryPathFromPath,
    topmostDirectoryNameFromPath: topmostDirectoryNameFromPath,
    pathWithoutBottommostNameFromPath: pathWithoutBottommostNameFromPath,
    pathWithoutTopmostDirectoryNameFromPath: pathWithoutTopmostDirectoryNameFromPath
};
exports.default = _default;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcGF0aC5qcyJdLCJuYW1lcyI6WyJFTVBUWV9TVFJJTkciLCJmaXJzdCIsInNlY29uZCIsImxhc3QiLCJpc1BhdGhOYW1lIiwicGF0aCIsInJlcGxhY2UiLCJwYXRoTmFtZSIsInRlc3QiLCJpc1BhdGhUb3Btb3N0TmFtZSIsInBhdGhBYnNvbHV0ZVBhdGgiLCJpc1BhdGhBYnNvbHV0ZVBhdGgiLCJwYXRoVG9wbW9zdE5hbWUiLCJpc1BhdGhSZWxhdGl2ZVBhdGgiLCJwYXRoUmVsYXRpdmVQYXRoIiwiaXNUb3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoIiwidG9wbW9zdE5hbWUiLCJhYnNvbHV0ZVBhdGgiLCJyZWdFeHAiLCJSZWdFeHAiLCJ0b3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoIiwiY29tYmluZVBhdGhzIiwicmVsYXRpdmVQYXRoIiwiY29tYmluZWRQYXRoIiwicGF0aE5hbWVzIiwic3BsaXQiLCJyZWxhdGl2ZVBhdGhOYW1lcyIsImxhc3RQYXRoTmFtZSIsImZpcnN0UmVsYXRpdmVQYXRoTmFtZSIsInNoaWZ0IiwidW5kZWZpbmVkIiwicG9wIiwiY29tYmluZWRQYXRoTmFtZXMiLCJjb25jYXQiLCJqb2luIiwiY29uY2F0ZW5hdGVQYXRocyIsImNvbmNhdGVuYXRlZFBhdGgiLCJib3R0b21tb3N0TmFtZUZyb21QYXRoIiwiYm90dG9tbW9zdE5hbWUiLCJtYXRjaGVzIiwibWF0Y2giLCJzZWNvbmRNYXRjaCIsInRvcG1vc3REaXJlY3RvcnlQYXRoRnJvbVBhdGgiLCJ0b3Btb3N0RGlyZWN0b3J5UGF0aCIsInRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgiLCJ0b3Btb3N0RGlyZWN0b3J5TmFtZSIsInBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWVGcm9tUGF0aCIsInBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWUiLCJwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgiLCJwYXRoV2l0aG91dFRv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QkFBMkI7SUFDM0IsWUFBWSxFQUFaLFlBQVk7SUFDWixnQkFBZ0IsRUFBaEIsZ0JBQWdCO0lBQ2hCLHNCQUFzQixFQUF0QixzQkFBc0I7SUFDdEIsNEJBQTRCLEVBQTVCLDRCQUE0QjtJQUM1Qiw0QkFBNEIsRUFBNUIsNEJBQTRCO0lBQzVCLGlDQUFpQyxFQUFqQyxpQ0FBaUM7SUFDakMsdUNBQXVDLEVBQXZDLHVDQUF1QztBQUN6QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IEVNUFRZX1NUUklORyB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IGZpcnN0LCBzZWNvbmQsIGxhc3QgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2FycmF5XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGhOYW1lKHBhdGgpIHtcbiAgcGF0aCA9IHBhdGgucmVwbGFjZSgvXlxcLy8sIEVNUFRZX1NUUklORykucmVwbGFjZSgvXFwvJC8sIEVNUFRZX1NUUklORyk7IC8vL1xuXG4gIGNvbnN0IHBhdGhOYW1lID0gKC9cXC8vLnRlc3QocGF0aCkgPT09IGZhbHNlKTtcblxuICByZXR1cm4gcGF0aE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGhUb3Btb3N0TmFtZShwYXRoKSB7XG4gIGNvbnN0IHBhdGhOYW1lID0gaXNQYXRoTmFtZShwYXRoKSxcbiAgICAgICAgcGF0aEFic29sdXRlUGF0aCA9IGlzUGF0aEFic29sdXRlUGF0aChwYXRoKSxcbiAgICAgICAgcGF0aFRvcG1vc3ROYW1lID0gKHBhdGhOYW1lICYmIHBhdGhBYnNvbHV0ZVBhdGgpO1xuXG4gIHJldHVybiBwYXRoVG9wbW9zdE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGhSZWxhdGl2ZVBhdGgocGF0aCkge1xuICBjb25zdCBwYXRoUmVsYXRpdmVQYXRoID0gIS9eXFwvLy50ZXN0KHBhdGgpO1xuXG4gIHJldHVybiBwYXRoUmVsYXRpdmVQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQYXRoQWJzb2x1dGVQYXRoKHBhdGgpIHtcbiAgY29uc3QgcGF0aEFic29sdXRlUGF0aCA9IC9eXFwvLy50ZXN0KHBhdGgpO1xuXG4gIHJldHVybiBwYXRoQWJzb2x1dGVQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUb3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoKHRvcG1vc3ROYW1lLCBhYnNvbHV0ZVBhdGgpIHtcbiAgY29uc3QgcmVnRXhwID0gbmV3IFJlZ0V4cChgXiR7dG9wbW9zdE5hbWV9KD86XFxcXC8uKyk/JGApLFxuICAgICAgICB0b3Btb3N0TmFtZUluQWJzb2x1dGVQYXRoID0gcmVnRXhwLnRlc3QoYWJzb2x1dGVQYXRoKTtcblxuICByZXR1cm4gdG9wbW9zdE5hbWVJbkFic29sdXRlUGF0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tYmluZVBhdGhzKHBhdGgsIHJlbGF0aXZlUGF0aCkge1xuICBsZXQgY29tYmluZWRQYXRoID0gbnVsbDtcblxuICBjb25zdCBwYXRoTmFtZXMgPSBwYXRoLnNwbGl0KC9cXC8vKSxcbiAgICAgICAgcmVsYXRpdmVQYXRoTmFtZXMgPSByZWxhdGl2ZVBhdGguc3BsaXQoL1xcLy8pO1xuXG4gIGxldCBsYXN0UGF0aE5hbWUsXG4gICAgICBmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPSBmaXJzdChyZWxhdGl2ZVBhdGhOYW1lcyk7XG5cbiAgaWYgKGZpcnN0UmVsYXRpdmVQYXRoTmFtZSA9PT0gXCIuXCIpIHtcbiAgICByZWxhdGl2ZVBhdGhOYW1lcy5zaGlmdCgpO1xuICB9XG5cbiAgZmlyc3RSZWxhdGl2ZVBhdGhOYW1lID0gZmlyc3QocmVsYXRpdmVQYXRoTmFtZXMpO1xuICBsYXN0UGF0aE5hbWUgPSBsYXN0KHBhdGhOYW1lcyk7XG5cbiAgd2hpbGUgKChmaXJzdFJlbGF0aXZlUGF0aE5hbWUgPT09IFwiLi5cIikgJiYgKGxhc3RQYXRoTmFtZSAhPT0gdW5kZWZpbmVkKSkge1xuICAgIHJlbGF0aXZlUGF0aE5hbWVzLnNoaWZ0KCk7XG4gICAgcGF0aE5hbWVzLnBvcCgpO1xuXG4gICAgZmlyc3RSZWxhdGl2ZVBhdGhOYW1lID0gZmlyc3QocmVsYXRpdmVQYXRoTmFtZXMpO1xuICAgIGxhc3RQYXRoTmFtZSA9IGxhc3QocGF0aE5hbWVzKTtcbiAgfVxuXG4gIGlmIChsYXN0UGF0aE5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGNvbWJpbmVkUGF0aE5hbWVzID0gW10uY29uY2F0KHBhdGhOYW1lcykuY29uY2F0KHJlbGF0aXZlUGF0aE5hbWVzKTtcblxuICAgIGNvbWJpbmVkUGF0aCA9IGNvbWJpbmVkUGF0aE5hbWVzLmpvaW4oXCIvXCIpO1xuICB9XG5cbiAgcmV0dXJuIGNvbWJpbmVkUGF0aDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdGVuYXRlUGF0aHMocGF0aCwgcmVsYXRpdmVQYXRoKSB7XG4gIHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcLyQvLCBFTVBUWV9TVFJJTkcpOyAgLy8vXG5cbiAgY29uc3QgY29uY2F0ZW5hdGVkUGF0aCA9IGAke3BhdGh9LyR7cmVsYXRpdmVQYXRofWA7XG5cbiAgcmV0dXJuIGNvbmNhdGVuYXRlZFBhdGg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBib3R0b21tb3N0TmFtZUZyb21QYXRoKHBhdGgpIHtcbiAgbGV0IGJvdHRvbW1vc3ROYW1lID0gbnVsbDtcblxuICBjb25zdCBtYXRjaGVzID0gcGF0aC5tYXRjaCgvXi4qXFwvKFteXFwvXStcXC8/KSQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgYm90dG9tbW9zdE5hbWUgPSBzZWNvbmRNYXRjaDsgIC8vL1xuICB9XG5cbiAgcmV0dXJuIGJvdHRvbW1vc3ROYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9wbW9zdERpcmVjdG9yeVBhdGhGcm9tUGF0aChwYXRoKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eKC4rKVxcL1teXFwvXStcXC8/JC8pLFxuICAgICAgICBzZWNvbmRNYXRjaCA9IHNlY29uZChtYXRjaGVzKSxcbiAgICAgICAgdG9wbW9zdERpcmVjdG9yeVBhdGggPSBzZWNvbmRNYXRjaDsgLy8vXG5cbiAgcmV0dXJuIHRvcG1vc3REaXJlY3RvcnlQYXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9wbW9zdERpcmVjdG9yeU5hbWVGcm9tUGF0aChwYXRoKSB7XG4gIGxldCB0b3Btb3N0RGlyZWN0b3J5TmFtZSA9IG51bGw7XG5cbiAgY29uc3QgbWF0Y2hlcyA9IHBhdGgubWF0Y2goL14oW15cXC9dKylcXC8uKyQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgdG9wbW9zdERpcmVjdG9yeU5hbWUgPSBzZWNvbmRNYXRjaDsgIC8vL1xuICB9XG5cbiAgcmV0dXJuIHRvcG1vc3REaXJlY3RvcnlOYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGF0aFdpdGhvdXRCb3R0b21tb3N0TmFtZUZyb21QYXRoKHBhdGgpIHtcbiAgbGV0IHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWUgPSBudWxsO1xuXG4gIGNvbnN0IG1hdGNoZXMgPSBwYXRoLm1hdGNoKC9eKC4qKVxcL1teXFwvXStcXC8/JC8pO1xuXG4gIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XG4gICAgY29uc3Qgc2Vjb25kTWF0Y2ggPSBzZWNvbmQobWF0Y2hlcyk7XG5cbiAgICBwYXRoV2l0aG91dEJvdHRvbW1vc3ROYW1lID0gc2Vjb25kTWF0Y2g7IC8vL1xuICB9XG5cbiAgcmV0dXJuIHBhdGhXaXRob3V0Qm90dG9tbW9zdE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGgocGF0aCkge1xuICBsZXQgcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSA9IG51bGw7XG5cbiAgY29uc3QgbWF0Y2hlcyA9IHBhdGgubWF0Y2goL15bXlxcL10rXFwvKC4rKSQvKTtcblxuICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHNlY29uZE1hdGNoID0gc2Vjb25kKG1hdGNoZXMpO1xuXG4gICAgcGF0aFdpdGhvdXRUb3Btb3N0RGlyZWN0b3J5TmFtZSA9IHNlY29uZE1hdGNoO1xuICB9XG5cbiAgcmV0dXJuIHBhdGhXaXRob3V0VG9wbW9zdERpcmVjdG9yeU5hbWU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNQYXRoTmFtZSxcbiAgaXNQYXRoVG9wbW9zdE5hbWUsXG4gIGlzUGF0aFJlbGF0aXZlUGF0aCxcbiAgaXNQYXRoQWJzb2x1dGVQYXRoLFxuICBpc1RvcG1vc3ROYW1lSW5BYnNvbHV0ZVBhdGgsXG4gIGNvbWJpbmVQYXRocyxcbiAgY29uY2F0ZW5hdGVQYXRocyxcbiAgYm90dG9tbW9zdE5hbWVGcm9tUGF0aCxcbiAgdG9wbW9zdERpcmVjdG9yeVBhdGhGcm9tUGF0aCxcbiAgdG9wbW9zdERpcmVjdG9yeU5hbWVGcm9tUGF0aCxcbiAgcGF0aFdpdGhvdXRCb3R0b21tb3N0TmFtZUZyb21QYXRoLFxuICBwYXRoV2l0aG91dFRvcG1vc3REaXJlY3RvcnlOYW1lRnJvbVBhdGhcbn07XG4iXX0=